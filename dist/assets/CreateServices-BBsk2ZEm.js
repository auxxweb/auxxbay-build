import{u as Q,ad as V,ae as ee,r as c,j as e,ah as u,ag as A,ak as n,aL as te,aj as se}from"./index-C2cS_aTe.js";import{C as le,g as ae}from"./cropper.utils-Bi71bAPE.js";import{p as re}from"./s3url-Bvh-UOT4.js";import{T as h}from"./TextField-gG14BLDK.js";const ne=()=>{var T,I,F,$;const f=Q(),W=V(),s=ee(t=>t.business),[a,m]=c.useState({title:"",description:"",data:[{title:"",description:"",image:"",link:""}]}),[g,b]=c.useState({specialService:{}}),[P,x]=c.useState(!1),[R,N]=c.useState(!1),[k]=c.useState([]),[L,D]=c.useState({x:0,y:0}),[E,z]=c.useState(1),[B,J]=c.useState(null),[O,p]=c.useState(!1),[v,C]=c.useState(null),[w,y]=c.useState(null),[U,Y]=c.useState(null),Z=(t,l)=>{J(l)},_=async()=>{try{x(!0);const{fileUrl:t,blob:l}=await ae(w,B),r=new File([l],(v==null?void 0:v.name)||"cropped-logo.png",{type:l.type}),o=await re(r,"service");o!=null&&o.accessLink?m(d=>{const i=[...d.data];return i[U].image=o.accessLink,{...d,data:i}}):console.error("Access link not found in response."),y(t),C(r),x(!1)}catch(t){x(!1),console.error("Error cropping image:",t)}finally{x(!1),p(!1)}},j=(t,l)=>{const{name:r,value:o}=l.target;m(d=>{const i=[...d.data];return i[t][r]=o,{...d,data:i}})},q=async(t,l,r)=>{const o=r.target.files[0];if(o){b(i=>({...i,[t]:{...i[t],[l]:!0}}));const d=new FileReader;C(o),Y(l),d.onload=async i=>{y(i.target.result),p(!0)},d.readAsDataURL(o),b(i=>({...i,[t]:{...i[t],[l]:!1}}))}},X=(t,l)=>{document.querySelectorAll(".specialServiceImageInput")[l].click()},G=()=>{N(!0),W(se({service:a})),f("/create-business/product"),N(!1)},S=t=>{const{name:l,value:r}=t.target;m(o=>({...o,[l]:r}))},H=t=>{m(l=>{const r=l.data.filter((o,d)=>d!==t);return{...l,data:r}})},K={dots:!1,autoplay:!0,arrows:!1,speed:500,slidesToShow:2,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0}},{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:390,settings:{slidesToShow:1,slidesToScroll:1}}]},M=()=>f("/create-business/core-services");return c.useEffect(()=>{m(JSON.parse(JSON.stringify(s==null?void 0:s.service))),console.log(s)},[s]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"h-100vh create-business-div",children:[O&&e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Crop Your Image"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>p(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"cropper-container position-relative",style:{height:"400px"},children:e.jsx(le,{image:w,crop:L,zoom:E,aspect:3/4,onCropChange:D,onZoomChange:z,onCropComplete:Z})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx(u,{variant:"contained",className:"mx-2 bg-danger border-danger",onClick:()=>p(!1),children:"Cancel"}),P?e.jsx(A,{variant:"primary"}):e.jsx(u,{color:"primary",variant:"contained",className:"mx-2",onClick:_,children:"Save Crop"})]})]})})}),e.jsxs("div",{className:"row h-100 justify-content-center",children:[e.jsxs("div",{className:"col-12 col-md-6 row align-items-end justify-content-center h-100 p-3 p-md-5 right-portion",children:[e.jsx("div",{className:"col-12 text-start",children:e.jsx("button",{className:"btn btn-dark w-auto float-start",onClick:M,children:e.jsx("i",{className:"bi bi-arrow-left"})})}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 mt-5 text-center text-md-start",children:e.jsxs("h1",{className:"fw-bold title-text",children:[e.jsx("span",{className:"title-main",children:"Add "}),e.jsx("span",{className:"title-highlight",children:"Services Details"})]})}),e.jsxs("div",{className:"col-12",children:[e.jsx(h,{fullWidth:!0,className:"my-2",label:"Title (8 words)",id:"title-1",variant:"filled",name:"title",autoComplete:"title-1",onChange:S,error:!!n(a.title,8),helperText:n(a.title,8)?"exceeded the limit":"",value:a.title}),e.jsx(h,{fullWidth:!0,className:"my-2",label:"Description (50 words)",id:"description-1",variant:"filled",name:"description",autoComplete:"description-1",multiline:!0,rows:4,value:a.description,onChange:S,error:!!n(a.description,50),helperText:n(a.description,50)?"exceeded the limit":""}),e.jsx("hr",{style:{border:"3px solid #105193",borderRadius:"5px",margin:"35px 0"}}),e.jsx("div",{className:"col-12 text-center",children:e.jsx("h5",{className:"fs-18 mb-4 p-1 text-center text-md-start text-dark fw-bold mt-3",children:"Add  Services Cards"})}),(T=a==null?void 0:a.data)==null?void 0:T.map((t,l)=>e.jsxs("div",{className:"mt-2 card p-3 pt-5 position-relative shadow-sm",style:{border:"1px solid #ddd",borderRadius:"8px"},children:[l<a.data.length-1&&e.jsx("div",{onClick:()=>H(l),className:"remove-button position-absolute",style:{top:"10px",right:"10px",cursor:"pointer",color:"#ff4d4f",fontSize:"18px",fontWeight:"bold",zIndex:9},children:"X"}),l!==0&&e.jsx("div",{className:"divider"}),e.jsx(h,{fullWidth:!0,label:"Title (8 words)",id:"title",className:"my-2",variant:"filled",name:"title",autoComplete:"Service Name",value:t.title,onChange:r=>j(l,r),error:!!n(t==null?void 0:t.title,8),helperText:n(t==null?void 0:t.title,8)?"exceeded the limit":""}),e.jsx(h,{fullWidth:!0,className:"my-2",label:"Description (50 words)",id:"description",variant:"filled",name:"description",autoComplete:"description",multiline:!0,rows:4,error:!!n(t==null?void 0:t.description,50),helperText:n(t==null?void 0:t.description,50)?"exceeded the limit":"",onChange:r=>j(l,r)}),e.jsx(h,{fullWidth:!0,className:"my-2",label:"Link ",id:"link",variant:"filled",name:"link",autoComplete:"link",error:!!n(t==null?void 0:t.link,50),helperText:n(t==null?void 0:t.link,50)?"exceeded the limit":"",onChange:r=>j(l,r)}),e.jsxs("div",{className:"col-12 col-md-3 mb-3 mx-auto",children:[e.jsx("input",{type:"file",hidden:!0,className:"specialServiceImageInput",onChange:r=>q("specialService",l,r)}),e.jsxs("div",{onClick:()=>X("specialService",l),className:"p-2 mt-2 add-logo-div",children:[e.jsx("span",{style:{color:"grey"},children:"(Ratio 3 : 4) "}),e.jsx("div",{className:"text-center",children:g!=null&&g.specialService[l]?e.jsx("div",{className:"spinner-border text-primary",role:"status"}):e.jsx("img",{src:t.image||"/images/add_image.png",width:"50",alt:"Add Service Image"})})]})]})]},`index-${l}`)),e.jsx("div",{className:"text-center",children:e.jsx(u,{href:"#",onClick:()=>m(t=>({...t,data:[...t.data,{title:"",description:"",image:""}]})),color:"primary",className:"w-100 submit-button",variant:"contained",children:"+ Add  Service Card"})})]}),k&&e.jsx("p",{className:"text-danger text-danger mt-3",children:k.toString()})]}),e.jsx("div",{className:"col-12 mt-4 text-center",children:R?e.jsx(A,{variant:"primary"}):e.jsx(u,{className:"w-100 submit-button",variant:"contained",onClick:G,children:"Save & Next"})})]}),e.jsxs("div",{className:"d-none d-md-block left-portion p-0 col-md-6 h-100",children:[e.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),e.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:!0}),e.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap",rel:"stylesheet"}),e.jsxs("style",{children:[" ",`
                              ::-webkit-scrollbar {
                                  width: 12px; /* Width of the entire scrollbar */
                              }
          
                              /* Scrollbar track */
                              ::-webkit-scrollbar-track {
                                  background: rgb(243, 243, 244); /* Background of the scrollbar track */
                              }::-webkit-scrollbar-thumb {
                                  background-color: ${s==null?void 0:s.theme}; /* Color of the scrollbar thumb */
                                  border-radius: 10px;     /* Rounded edges of the thumb */
                                  border: 3px solid  ${s==null?void 0:s.theme}; /* Padding around the thumb */
                              }
                          .theme
                          {
                              background-color: ${s==null?void 0:s.theme};
                              color: white;
                              border: none;
                          }.service-design.active{
                              background-color: ${s==null?void 0:s.theme};
                          }.address-section{
                          background-color:${s==null?void 0:s.theme};
                          }.address-logo i{
                          color: ${s==null?void 0:s.theme};
                          }.cat-option{
                              border-right: 1px dashed ${s==null?void 0:s.theme};
                          }.text-orange{
                                  color: ${s==null?void 0:s.theme};
                              }.dish-div:hover{
                                  background-color: ${s==null?void 0:s.theme};
                                  color:white;
                              }.product-section{
                              padding:20px;
                              border:1px solid ${s==null?void 0:s.theme};
                              border-radius:16px;
                                  }.slick-dots .slick-active button{
                                      background-color: ${s==null?void 0:s.theme};
                                      border-radius: 16px;
                                  }
                              `]}),e.jsx("div",{children:e.jsx("section",{className:"h-auto",style:{backgroundColor:"#F3F3F4",overflowY:"scroll"},children:e.jsxs("div",{className:"container p-top",children:[e.jsx("div",{className:"col-12 mb-5",children:e.jsxs("div",{className:"mt-5 text-center",children:[e.jsx("div",{className:"col-12",children:e.jsx("h1",{className:"text-center text-dark fw-bold david-font fw-bold banner-title fs-45",children:a.title})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-6 mb-1",children:e.jsx("p",{className:"text-secondary text-center",children:a.description})})})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"col-12 mb-5 row justify-content-center david-font",children:((I=a==null?void 0:a.data)==null?void 0:I.length)>2?e.jsx(te,{...K,children:(F=a==null?void 0:a.data)==null?void 0:F.map((t,l)=>e.jsxs("div",{className:"dish-div col-12 col-lg-6 text-center p-3",children:[e.jsx("div",{className:"col-12 position-relative",children:e.jsx("img",{src:t.image,alt:t.title,style:{width:"100%",height:"auto",maxWidth:"300px",objectFit:"cover"}})}),e.jsx("div",{className:"col-12",children:e.jsx("h2",{className:"fs-20 fw-bold",children:t.title})}),e.jsx("div",{className:"col-12 mt-3 mb-3",children:e.jsx("p",{children:t.description})})]},l))}):($=a==null?void 0:a.data)==null?void 0:$.map((t,l)=>e.jsxs("div",{className:"dish-div col-12 col-lg-6 text-center p-3",children:[e.jsx("div",{className:"col-12 position-relative",children:e.jsx("img",{src:t.image,alt:t.title,style:{width:"100%",height:"auto",maxWidth:"300px",objectFit:"cover"}})}),e.jsx("div",{className:"col-12",children:e.jsx("h2",{className:"fs-20 fw-bold",children:t.title})}),e.jsx("div",{className:"col-12 mt-3 mb-3",children:e.jsx("p",{children:t.description})})]},l))})})]})})})]})]})]})})};export{ne as default};
