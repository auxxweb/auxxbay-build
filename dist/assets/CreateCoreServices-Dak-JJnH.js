import{u as G,ad as H,ae as K,r as c,j as e,ah as u,ag as I,ak as n,aL as Q,aj as V}from"./index-DChezozi.js";import{C as ee,g as te}from"./cropper.utils-CAPiAWlv.js";import{p as se}from"./s3url-dtrJtRcg.js";import{T as p}from"./TextField-C7oGFiCr.js";const ie=()=>{var T;const f=G(),F=H(),s=K(t=>t.business),[r,m]=c.useState({title:"",description:"",data:[{title:"",description:"",image:"",link:""}]}),[g,b]=c.useState({specialService:{}}),[$,N]=c.useState(!1),[A,h]=c.useState(!1),[C]=c.useState([]),[W,L]=c.useState({x:0,y:0}),[P,R]=c.useState(1),[D,E]=c.useState(null),[z,x]=c.useState(!1),[v,k]=c.useState(null),[w,y]=c.useState(null),[B,J]=c.useState(null),M=(t,l)=>{E(l)},O=async()=>{try{h(!0);const{fileUrl:t,blob:l}=await te(w,D),a=new File([l],(v==null?void 0:v.name)||"cropped-logo.png",{type:l.type}),o=await se(a,"service");o!=null&&o.accessLink?m(d=>{const i=[...d.data];return i[B].image=o.accessLink,{...d,data:i}}):console.error("Access link not found in response."),y(t),k(a),h(!1)}catch(t){h(!1),console.error("Error cropping image:",t)}finally{h(!1),x(!1)}},j=(t,l)=>{const{name:a,value:o}=l.target;m(d=>{const i=[...d.data];return i[t][a]=o,{...d,data:i}})},U=async(t,l,a)=>{const o=a.target.files[0];if(o){b(i=>({...i,[t]:{...i[t],[l]:!0}}));const d=new FileReader;k(o),J(l),d.onload=async i=>{y(i.target.result),x(!0)},d.readAsDataURL(o),b(i=>({...i,[t]:{...i[t],[l]:!1}}))}},Y=(t,l)=>{document.querySelectorAll(".specialServiceImageInput")[l].click()},Z=()=>{N(!0),F(V({specialServices:r})),f("/create-business/services"),N(!1)},S=t=>{const{name:l,value:a}=t.target;m(o=>({...o,[l]:a}))},_=t=>{m(l=>{const a=l.data.filter((o,d)=>d!==t);return{...l,data:a}})},q={dots:!1,autoplay:!0,arrows:!1,speed:500,slidesToShow:2,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0}},{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:390,settings:{slidesToShow:1,slidesToScroll:1}}]},X=()=>f("/create-business/landing");return c.useEffect(()=>{m(JSON.parse(JSON.stringify(s==null?void 0:s.specialServices)))},[s]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"h-100vh create-business-div",children:[z&&e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Crop Your Image"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>x(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"cropper-container position-relative",style:{height:"400px"},children:e.jsx(ee,{image:w,crop:W,zoom:P,aspect:3/4,onCropChange:L,onZoomChange:R,onCropComplete:M})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx(u,{variant:"contained",className:"bg-danger border-danger mx-2",onClick:()=>x(!1),children:"Cancel"}),A?e.jsx(I,{variant:"primary"}):e.jsx(u,{className:" mx-2",variant:"contained",onClick:O,children:"Save Crop"})]})]})})}),e.jsxs("div",{className:"row h-100 justify-content-center",children:[e.jsxs("div",{className:"col-12 col-md-6 row align-items-end justify-content-center h-100 p-3 p-md-5 right-portion",children:[e.jsx("div",{className:"col-12 text-start",children:e.jsx("button",{className:"btn btn-dark w-auto float-start",onClick:X,children:e.jsx("i",{className:"bi bi-arrow-left"})})}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 mt-5 text-center text-md-start",children:e.jsxs("h1",{className:"fw-bold title-text title-main",children:["Add ",e.jsx("span",{className:"title-highlight",children:"Core Services Details"})]})}),e.jsxs("div",{className:"col-12 ",children:[e.jsx(p,{fullWidth:!0,className:"my-2",label:"Title (8 words)",id:"title-1",variant:"filled",name:"title",autoComplete:"title-1",onChange:S,error:!!n(r.title,8),helperText:n(r.title,8)?"exceeded the limit":"",value:r.title}),e.jsx(p,{fullWidth:!0,className:"my-2",label:"Description (50 words)",id:"description-1",variant:"filled",name:"description",autoComplete:"description-1",multiline:!0,rows:4,value:r.description,onChange:S,error:!!n(r.description,50),helperText:n(r.description,50)?"exceeded the limit":"",sx:{"& .MuiInputBase-root":{padding:"12px"},"& .MuiFilledInput-root":{backgroundColor:"#f9f9f9"},"& .MuiFormLabel-root":{top:"-6px"}}}),e.jsx("hr",{style:{border:"3px solid #105193",borderRadius:"5px",margin:"35px 0"}}),e.jsx("div",{className:"col-12 text-center",children:e.jsx("h5",{className:"fs-18 mb-4 p-1 text-center text-md-start text-dark fw-bold mt-3",children:"Add Core Services Cards"})}),(T=r==null?void 0:r.data)==null?void 0:T.map((t,l)=>e.jsxs("div",{className:"mt-2 card p-3 pt-5 position-relative shadow-sm",style:{border:"1px solid #ddd",borderRadius:"8px"},children:[l<r.data.length-1&&e.jsx("div",{onClick:()=>_(l),className:"remove-button position-absolute",style:{top:"10px",right:"10px",cursor:"pointer",color:"#ff4d4f",fontSize:"18px",fontWeight:"bold",zIndex:9},children:"X"}),l!==0&&e.jsx("div",{className:"divider"}),e.jsx(p,{fullWidth:!0,label:"Title (8 words)",id:"title",variant:"filled",className:"my-2",name:"title",autoComplete:"Service Name",type:"text",value:t.title,onChange:a=>j(l,a),error:!!n(t.title,8),helperText:n(t.title,8)?"exceeded the limit":""}),e.jsx(p,{fullWidth:!0,label:"Description (50 words)",id:"description",variant:"filled",className:"my-2",name:"description",autoComplete:"description",multiline:!0,type:"text",rows:4,error:n(t.description,50),helperText:n(t.description,50)?"exceeded the limit":"",onChange:a=>j(l,a)}),e.jsx(p,{fullWidth:!0,label:"Link",id:"link",variant:"filled",className:"my-2",name:"link",autoComplete:"link",type:"text",error:n(t.link,80),helperText:n(t.link,80)?"exceeded the limit":"",onChange:a=>j(l,a)}),e.jsxs("div",{className:"col-12 col-md-3 mb-3 mx-auto",children:[e.jsx("input",{type:"file",hidden:!0,className:"specialServiceImageInput",onChange:a=>U("specialService",l,a)}),e.jsxs("div",{onClick:()=>Y("specialService",l),className:"p-2 mt-2 add-logo-div mx-auto",children:[e.jsx("span",{style:{color:"grey"},children:"(Ratio 3 : 4) "}),e.jsx("div",{className:"text-center",children:g!=null&&g.specialService[l]?e.jsx("div",{className:"spinner-border text-primary",role:"status"}):e.jsx("img",{src:t.image||"/images/add_image.png",width:"50",alt:"Add Service Image"})})]})]})]},`index-${l}`)),e.jsx("div",{className:"text-center ",children:e.jsx(u,{href:"#",onClick:()=>m(t=>({...t,data:[...t.data,{title:"",description:"",image:""}]})),color:"primary",className:"w-100 submit-button ",variant:"contained",children:"+ Add Service Cards"})})]}),C&&e.jsx("p",{className:"text-danger text-danger mt-3",children:C.toString()})]}),e.jsx("div",{className:"col-12 mt-4 text-center",children:$?e.jsx(I,{variant:"primary"}):e.jsx(u,{color:"primary",className:"w-100 submit-button",variant:"contained",onClick:Z,children:"Save & Next"})})]}),e.jsxs("div",{className:"d-none d-md-block left-portion p-0 col-md-6 h-100",children:[e.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),e.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:!0}),e.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap",rel:"stylesheet"}),e.jsxs("style",{children:[" ",`
                              ::-webkit-scrollbar {
                                  width: 12px; /* Width of the entire scrollbar */
                              }
          
                              /* Scrollbar track */
                              ::-webkit-scrollbar-track {
                                  background: rgb(243, 243, 244); /* Background of the scrollbar track */
                              }::-webkit-scrollbar-thumb {
                                  background-color: ${s==null?void 0:s.theme}; /* Color of the scrollbar thumb */
                                  border-radius: 10px;     /* Rounded edges of the thumb */
                                  border: 3px solid  ${s==null?void 0:s.theme}; /* Padding around the thumb */
                              }
                          .theme
                          {
                              background-color: ${s==null?void 0:s.theme};
                              color: white;
                              border: none;
                          }.service-design.active{
                              background-color: ${s==null?void 0:s.theme};
                          }.address-section{
                          background-color:${s==null?void 0:s.theme};
                          }.address-logo i{
                          color: ${s==null?void 0:s.theme};
                          }.cat-option{
                              border-right: 1px dashed ${s==null?void 0:s.theme};
                          }.text-orange{
                                  color: ${s==null?void 0:s.theme};
                              }.dish-div:hover{
                                  background-color: ${s==null?void 0:s.theme};
                                  color:white;
                              }.product-section{
                              padding:20px;
                              border:1px solid ${s==null?void 0:s.theme};
                              border-radius:16px;
                                  }.slick-dots .slick-active button{
                                      background-color: ${s==null?void 0:s.theme};
                                      border-radius: 16px;
                                  }
                              `]}),e.jsx("div",{children:e.jsx("section",{className:"h-auto",style:{backgroundColor:"#F3F3F4",overflowY:"scroll"},children:e.jsxs("div",{className:"container p-top",children:[e.jsx("div",{className:"col-12 mb-5",children:e.jsxs("div",{className:"mt-5 text-center",children:[e.jsx("div",{className:"col-12",children:e.jsx("h1",{className:"text-center text-dark fw-bold david-font fw-bold banner-title fs-45",children:r.title})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-6 mb-1",children:e.jsx("p",{className:"text-secondary text-center",children:r.description})})})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"col-12 mb-5 row justify-content-center david-font",children:r.data.length>2?e.jsx(Q,{...q,children:r.data.map((t,l)=>e.jsxs("div",{className:"dish-div col-12 col-lg-6 text-center p-3",children:[e.jsx("div",{className:"col-12 position-relative",children:e.jsx("img",{src:t.image,alt:t.title,style:{width:"100%",height:"auto",maxWidth:"300px",objectFit:"cover"}})}),e.jsx("div",{className:"col-12",children:e.jsx("h2",{className:"fs-20 fw-bold",children:t.title})}),e.jsx("div",{className:"col-12 mt-3 mb-3",children:e.jsx("p",{children:t.description})})]},l))}):r.data.map((t,l)=>e.jsxs("div",{className:"dish-div col-12 col-lg-6 text-center p-3",children:[e.jsx("div",{className:"col-12 position-relative",children:e.jsx("img",{src:t.image,alt:t.title,style:{width:"100%",height:"auto",maxWidth:"300px",objectFit:"cover"}})}),e.jsx("div",{className:"col-12",children:e.jsx("h2",{className:"fs-20 fw-bold",children:t.title})}),e.jsx("div",{className:"col-12 mt-3 mb-3",children:e.jsx("p",{children:t.description})})]},l))})})]})})})]})]})]})})};export{ie as default};
